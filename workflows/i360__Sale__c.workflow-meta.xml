<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <alerts>
        <fullName>i360__Hosted_Payment_Email_Alert</fullName>
        <description>Hosted Payment Email Alert</description>
        <protected>false</protected>
        <recipients>
            <field>i360__Email_Address__c</field>
            <type>email</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>i360__Templates_Sale/i360__Hosted_Payment_Link_Email_Template</template>
    </alerts>
    <alerts>
        <fullName>i360__Sale_Confirmation</fullName>
        <description>Sale Confirmation</description>
        <protected>false</protected>
        <recipients>
            <field>i360__Email_Address__c</field>
            <type>email</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>i360__Lifecycle_Communications/i360__Sale_Complete_Confirmation</template>
    </alerts>
    <alerts>
        <fullName>i360__Sale_Paid_Confirmation</fullName>
        <description>Sale Paid Confirmation</description>
        <protected>false</protected>
        <recipients>
            <field>i360__Email_Address__c</field>
            <type>email</type>
        </recipients>
        <senderType>CurrentUser</senderType>
        <template>i360__Lifecycle_Communications/i360__Paid_in_Full_Confirmation</template>
    </alerts>
    <fieldUpdates>
        <fullName>i360__Sync_Sale_Email</fullName>
        <description>Keeps the sale email address in sync with the prospect information.</description>
        <field>i360__Email_Address__c</field>
        <formula>IF(ISNULL(i360__Prospect__r.i360__Primary_Email__c) || i360__Prospect__r.i360__Primary_Email__c = &apos;&apos;, i360__Prospect__r.i360__Secondary_Email__c, i360__Prospect__r.i360__Primary_Email__c)</formula>
        <name>Sync Sale Email</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>i360__Sale Final Confirmation</fullName>
        <actions>
            <name>i360__Sync_Sale_Email</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <criteriaItems>
            <field>i360__Sale__c.i360__Final_Date__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>i360__Sale__c.i360__Send_Email_When_Final__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>i360__Sale__c.i360__Prospect_Email__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>i360__Sale__c.i360__Prospect_Opt_Out_Email__c</field>
            <operation>equals</operation>
            <value>False</value>
        </criteriaItems>
        <description>Emails a confirmation to the buyer thanking them for their purchase what a sale is final.</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>i360__Sale Paid Confirmation</fullName>
        <actions>
            <name>i360__Sync_Sale_Email</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <criteriaItems>
            <field>i360__Sale__c.i360__Paid_in_Full__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>i360__Sale__c.i360__Prospect_Email__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>i360__Sale__c.i360__Send_Email_When_Paid_In_Full__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>i360__Sale__c.i360__Prospect_Opt_Out_Email__c</field>
            <operation>equals</operation>
            <value>False</value>
        </criteriaItems>
        <description>Emails a confirmation to the buyer confirming their full payment has been received and processed.</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
</Workflow>
